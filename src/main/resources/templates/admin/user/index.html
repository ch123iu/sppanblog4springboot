<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>${siteName!} - 管理后台登录</title>
    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="${ctx!}/js/bootstrap-table/bootstrap-table.min.css">
    <link rel="stylesheet" href="${ctx!}/layui/css/layui.css">
    <link rel="stylesheet" href="${ctx!}/css/style.css">
</head>
<body>

<fieldset class="layui-elem-field layui-field-title">
    <legend>
        <span class="layui-breadcrumb">
            <a href="javascript:;">用户管理</a>
            <a><cite>用户列表</cite></a>
        </span>
    </legend>
</fieldset>

<div class="my-btn-box">
    <span class="fl">
        <a class="layui-btn layui-btn-danger radius btn-delect" id="btn-delete-all">批量删除</a>
        <a class="layui-btn btn-add btn-default" id="btn-add-article">发布文章</a>
    </span>
</div>

<table id="table_list" class="layui-table"></table>

<script type="text/javascript" src="${ctx!}/layui/layui.js"></script>
<!-- jQuery -->
<script type="text/javascript" charset="utf8" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="${ctx!}/js/bootstrap-table/bootstrap-table.min.js"></script>
<!-- Latest compiled and minified Locales -->
<script src="${ctx!}/js/bootstrap-table/locale/bootstrap-table-zh-CN.js"></script>

<script type="text/javascript">
    layui.use(['element','layer'], function(){
        var $ = layui.jquery,element = layui.element,layer = layui.layer;
      //初始化表格,动态从服务器加载数据  
		$("#table_list").bootstrapTable({
		    //使用get请求到服务器获取数据  
		    method: "POST",
		    //必须设置，不然request.getParameter获取不到请求参数
		    contentType: "application/x-www-form-urlencoded",
		    //获取数据的Servlet地址  
		    url: "${ctx!}/admin/user/list",
		    //表格显示条纹  
		    striped: true,
		    //启动分页  
		    pagination: true,
		    //每页显示的记录数  
		    pageSize: 10,
		    //当前第几页  
		    pageNumber: 1,
		    //记录数可选列表  
		    pageList: [5, 10, 15, 20, 25],
		    //是否启用查询  
		    search: false,
		    //是否启用详细信息视图
		    detailView:true,
		    detailFormatter:detailFormatter,
		    //表示服务端请求  
		    sidePagination: "server",
		    //设置为undefined可以获取pageNumber，pageSize，searchText，sortName，sortOrder  
		    //设置为limit可以获取limit, offset, search, sort, order  
		    queryParamsType: "undefined",
		    //json数据解析
		    responseHandler: function(res) {
		        return {
		            "rows": res.list,
		            "total": res.totalRow
		        };
		    },
		    //数据列
		    columns: [{
		        title: "ID",
		        field: "id",
		        sortable: true
		    },{
		        title: "用户名",
		        field: "userName"
		    },{
		        title: "昵称",
		        field: "nickName"
		    },{
		        title: "盐资源",
		        field: "salt"
		    },{
		        title: "头像",
		        field: "avatar"
		    },{
		        title: "创建日期",
		        field: "createAt"
		    },{
		        title: "IP",
		        field: "ip"
		    },{
		        title: "状态",
		        sortable: true,
		        field: "status",
                formatter: function (value, row, index) {
                    if (value == '-1') 
                    	return '<span class="label label-danger">锁定</span>';
                    else if (value == '0') 
                    	return '<span class="label label-info">未激活</span>';
                    else
                    return '<span class="label label-primary">已激活</span>';
                }
		    },{
		        title: "操作",
		        field: "empty",
                formatter: function (value, row, index) {
                    return "111";
                }
		    }]
		});
      
		function detailFormatter(index, row) {
	        var html = [];
	        html.push('<p><b>描述:</b> ' + row.description + '</p>');
	        return html.join('');
	    }

    });
</script>
</body>
</html>